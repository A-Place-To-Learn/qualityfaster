machine:
  java:
    version: oraclejdk8
  node:
    version: 6.5.0

dependencies:
  cache_directories:
    - "node_modules"
    - "~/.npm"

  override:
    # Cache npm deps
    - npm install

    # Cache Chimp's Selenium & ChromeDriver downloads
    - mkdir ./tmp && ./node_modules/.bin/chimp --path=./tmp && rm -rf ./tmp # there are no tests here

    # Cache Karma's dependencies
    - ./node_modules/.bin/karma start ./config/karma.config.js || true

test:
  override:
    - npm test
